<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>JobSwipe — найди свою IT‑пару</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="app">

  <!-- START SCREEN -->
  <div id="startScreen" class="screen">
    <div class="logo-section">
      <h1>JobSwipe</h1>
      <p class="subtitle">Тиндер для IT‑специалистов</p>
    </div>
    <button onclick="goToLoginScreen()">Войти</button>
    <button class="secondary" onclick="goToRegisterScreen()">Регистрация</button>
  </div>

  <!-- LOGIN SCREEN -->
  <div id="loginScreen" class="screen hidden">
    <div class="form-header">
      <h2>Вход</h2>
      <button class="back-btn" onclick="goToStartScreen()">←</button>
    </div>

    <div class="role-tabs">
      <button class="tab-btn active" data-role="worker" onclick="switchLoginRole('worker')">Соискатель</button>
      <button class="tab-btn" data-role="employer" onclick="switchLoginRole('employer')">Работодатель</button>
    </div>

    <form onsubmit="handleLogin(event)">
      <input type="email" id="loginEmail" placeholder="Почта" required>
      <input type="password" id="loginPassword" placeholder="Пароль" required>
      <button type="submit" class="primary">Войти</button>
    </form>

    <p class="form-footer">Нет аккаунта? <a href="#" onclick="goToRegisterScreen(); return false;">Зарегистрироваться</a></p>
  </div>

  <!-- REGISTER SCREEN -->
  <div id="registerScreen" class="screen hidden">
    <div class="form-header">
      <h2>Регистрация</h2>
      <button class="back-btn" onclick="goToStartScreen()">←</button>
    </div>

    <div class="role-tabs">
      <button class="tab-btn active" data-role="worker" onclick="switchRegisterRole('worker')">Соискатель</button>
      <button class="tab-btn" data-role="employer" onclick="switchRegisterRole('employer')">Работодатель</button>
    </div>

    <form onsubmit="handleRegister(event)">
      <input type="text" id="registerName" placeholder="Имя и фамилия / Название компании" required>
      <input type="email" id="registerEmail" placeholder="Почта" required>
      <input type="password" id="registerPassword" placeholder="Пароль" required>
      
      <div id="workerFields">
        <input type="text" id="registerSpecialty" placeholder="Например, Frontend‑разработчик">
        <input type="text" id="registerSkills" placeholder="Навыки (через запятую)">
      </div>

      <div id="employerFields" class="hidden">
        <input type="text" id="registerCompany" placeholder="Сайт компании">
        <textarea id="registerDescription" placeholder="Описание компании"></textarea>
      </div>

      <button type="submit" class="primary">Зарегистрироваться</button>
    </form>

    <p class="form-footer">Уже есть аккаунт? <a href="#" onclick="goToLoginScreen(); return false;">Войти</a></p>
  </div>

  <!-- MAIN FEED SCREEN - THREE COLUMN LAYOUT -->
  <div id="main" class="screen hidden">
    <button class="menu-toggle" onclick="toggleMenu()">☰ Меню</button>
    
    <!-- LEFT SIDEBAR MENU -->
    <aside id="sideMenu" class="side-menu">
      <div class="menu-header">
        <h3>JobSwipe</h3>
        <button class="close-menu-btn" onclick="toggleMenu()">✕</button>
      </div>
      
      <div class="menu-content">
        <!-- FILTERS SECTION -->
        <div class="menu-section">
          <h4>Фильтры</h4>
          
          <div class="filter-item">
            <label>Направление:</label>
            <select id="filterDirection" onchange="applyFilters()">
              <option value="">Все</option>
              <option value="frontend">Frontend‑разработчик</option>
              <option value="backend">Backend‑разработчик</option>
              <option value="fullstack">Fullstack‑разработчик</option>
              <option value="devops">DevOps‑инженер</option>
              <option value="data">Data Scientist</option>
              <option value="qa">QA‑инженер</option>
              <option value="mobile">Мобильный разработчик</option>
              <option value="ai">AI/ML‑инженер</option>
            </select>
          </div>

          <div class="filter-item">
            <label>Мин. проектов:</label>
            <input type="number" id="filterMinProjects" min="0" max="100" placeholder="0" onchange="applyFilters()">
          </div>

          <div class="filter-item">
            <label>Макс. проектов:</label>
            <input type="number" id="filterMaxProjects" min="0" max="100" placeholder="100" onchange="applyFilters()">
          </div>

          <div class="filter-item">
            <label>Уровень:</label>
            <select id="filterLevel" onchange="applyFilters()">
              <option value="">Все</option>
              <option value="junior">Джуниор (0–2 года)</option>
              <option value="middle">Мидл (2–5 лет)</option>
              <option value="senior">Сеньор (5+ лет)</option>
            </select>
          </div>

          <button class="secondary" onclick="resetFilters()" style="width: 100%; margin-top: 12px;">Сбросить фильтры</button>
        </div>

        <!-- ACCOUNT SECTION -->
        <div class="menu-section">
          <h4>Аккаунт</h4>
          <div class="account-info" id="accountInfo"></div>
          <button class="menu-button" onclick="goToLoginScreen(); toggleMenu();">Сменить аккаунт</button>
          <button class="menu-button danger" onclick="logout();">Выйти</button>
        </div>

        <!-- NOTIFICATIONS SECTION -->
        <div class="menu-section">
          <h4>Уведомления</h4>
          <button class="menu-button" onclick="goToChatsScreen(); toggleMenu();">Сообщения <span id="notificationBadge" class="badge hidden">0</span></button>
        </div>
      </div>
    </aside>

    <!-- CENTER CONTENT - TINDER CARDS -->
    <div class="main-content">
      <div class="header">
        <h2 id="roleTitle"></h2>
      </div>

      <div class="card-container">
        <div class="card" id="jobCard"></div>
      </div>

      <div class="actions">
        <button class="dislike" onclick="swipe(false)" title="Не интересно">✖ Пропуск</button>
        <button class="super-like" onclick="swipe('super')" title="Очень интересно">★ В избранное</button>
        <button class="like" onclick="swipe(true)" title="Интересно">❤ Лайк</button>
      </div>

      <div class="counter" id="counter"></div>
    </div>

    <!-- RIGHT SIDEBAR - STATISTICS & FAVORITES -->
    <aside id="statsPanel" class="stats-panel">
      <div class="stats-header">
        <h3>Моя статистика</h3>
        <button class="close-stats-btn" onclick="toggleStatsPanel()">✕</button>
      </div>
      
      <div class="stats-content">
        <div class="stat-item">
          <span class="stat-label">Просмотрено:</span>
          <span class="stat-value" id="totalViewed">0</span>
        </div>
        
        <div class="stat-item">
          <span class="stat-label">Понравилось:</span>
          <span class="stat-value" id="totalLiked">0</span>
        </div>
        
        <div class="stat-item">
          <span class="stat-label">Избранное:</span>
          <span class="stat-value" id="totalFavorites">0</span>
        </div>

        <div class="favorites-section">
          <h4>Избранное</h4>
          <div class="favorites-list" id="favoritesList">
            <p class="empty-message">Пока нет избранного. Добавьте с помощью кнопки ★</p>
          </div>
        </div>
      </div>
    </aside>
  </div>

  <!-- CHAT SCREEN -->
  <div id="chatScreen" class="screen hidden">
    <div class="chat-header">
      <button class="back-btn" onclick="backToMain()">←</button>
      <h3 id="matchTitle">Чат с компанией</h3>
    </div>

    <div class="chat" id="chat"></div>

    <div class="chat-input-container">
      <input
        id="chatInput"
        type="text"
        placeholder="Введите сообщение..."
        onkeydown="sendMessage(event)"
      >
    </div>
  </div>

  <!-- CHATS LIST SCREEN -->
  <div id="chatsScreen" class="screen hidden">
    <div class="chat-header">
      <button class="back-btn" onclick="goToMainScreen()">←</button>
      <h2>Сообщения</h2>
    </div>

    <div class="chats-list" id="chatsList">
      <div class="empty-state">
        <p>Пока нет сообщений</p>
        <p class="small">Сообщения от компаний появятся здесь</p>
      </div>
    </div>
  </div>

</div>

<script src="app.js"></script>
</body>
</html>
